<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Embedded Xinu Operating System: /users/home/pmcgee6/raxinu/19_ra/xinu/device/flash/physical.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Embedded Xinu Operating System
   </div>
   <div id="projectbrief">An ongoing research project and educational operating system.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_820b2b9dd608784780e51ab49715a98b.html">device</a></li><li class="navelem"><a class="el" href="dir_63e0116f2212deeb8c05cadecd1b8d22.html">flash</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">physical.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;flash.h&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a293c92e507042fbc66fc7a02c29ac8d2"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="physical_8c.html#a293c92e507042fbc66fc7a02c29ac8d2">physicalRead</a> (struct flash *flash, struct flash_block *block)</td></tr>
<tr class="separator:a293c92e507042fbc66fc7a02c29ac8d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbdb5c51d7bf941811c80865db0e23e6"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="physical_8c.html#abbdb5c51d7bf941811c80865db0e23e6">physicalWrite</a> (struct flash *flash, struct flash_block *block)</td></tr>
<tr class="separator:abbdb5c51d7bf941811c80865db0e23e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a097b261adee99c0ea924f08d825245e9"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="physical_8c.html#a097b261adee99c0ea924f08d825245e9">physicalErase</a> (struct flash *flash, struct flash_block *block)</td></tr>
<tr class="separator:a097b261adee99c0ea924f08d825245e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a002cf962563d6520887f03c7110ed373"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="physical_8c.html#a002cf962563d6520887f03c7110ed373">physicalControl</a> (struct flash *flash, struct flash_block *block, uchar func, ulong arg)</td></tr>
<tr class="separator:a002cf962563d6520887f03c7110ed373"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A function from this file calls the proper function of the specific command set if it is supported.</p>
<p>Functions in this file communicate directly with the hardware to achieve their goals. This file acts like the BIOS in older computers (by providing calls to to the physical work to the O/S). </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a002cf962563d6520887f03c7110ed373"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall physicalControl </td>
          <td>(</td>
          <td class="paramtype">struct flash *&#160;</td>
          <td class="paramname"><em>flash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct flash_block *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*flash</td><td>flash device to use </td></tr>
    <tr><td class="paramname">*block</td><td>block to perform operations on </td></tr>
    <tr><td class="paramname">func</td><td>see include/flash.h for functions </td></tr>
    <tr><td class="paramname">arg</td><td>argument (if needed) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status of function </dd></dl>

</div>
</div>
<a class="anchor" id="a097b261adee99c0ea924f08d825245e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall physicalErase </td>
          <td>(</td>
          <td class="paramtype">struct flash *&#160;</td>
          <td class="paramname"><em>flash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct flash_block *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Erase an erase-block from Flash memory. Flash memory can only change a binary 1 to a binary 0, not the other way around. In order to write new data to the device we must tell flash to change all 0s to 1s. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*flash</td><td>flash device to perform operations on </td></tr>
    <tr><td class="paramname">*block</td><td>block to erase </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK on success, SYSERR on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a293c92e507042fbc66fc7a02c29ac8d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall physicalRead </td>
          <td>(</td>
          <td class="paramtype">struct flash *&#160;</td>
          <td class="paramname"><em>flash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct flash_block *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Physically read from the flash device. Passed in block must contain the start_pos for the reading and the size of the block located at start_pos. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*flash</td><td>flash device used for data. </td></tr>
    <tr><td class="paramname">*block</td><td>flash_block to store data in. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes read on success, SYSERR on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="abbdb5c51d7bf941811c80865db0e23e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall physicalWrite </td>
          <td>(</td>
          <td class="paramtype">struct flash *&#160;</td>
          <td class="paramname"><em>flash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct flash_block *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Physically write to the flash device. This will write a stored block to memory if the state if FLASH_BLOCK_DIRTY (data within the block has changed). If it is not in the FLASH_BLOCK_DIRTY state that means the block is either FREE (nothing is stored) or CLEAN (hasn't changed since it was read). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*flash</td><td>flash device used for data. </td></tr>
    <tr><td class="paramname">*block</td><td>flash_block to store data in. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes written on success, SYSERR on failure. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
