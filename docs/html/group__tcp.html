<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Embedded Xinu Operating System: TCP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Embedded Xinu Operating System
   </div>
   <div id="projectbrief">An ongoing research project and educational operating system.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">TCP<div class="ingroups"><a class="el" href="group__devices.html">Device Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Transmission Control Protocol driver.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa2153df9bbc47bfd108b8220ff1d8ab2"><td class="memItemLeft" align="right" valign="top">ushort&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gaa2153df9bbc47bfd108b8220ff1d8ab2">tcpAlloc</a> (void)</td></tr>
<tr class="separator:gaa2153df9bbc47bfd108b8220ff1d8ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga25d584036e586a90cc128af3db5d74f5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga25d584036e586a90cc128af3db5d74f5"></a>
ushort&#160;</td><td class="memItemRight" valign="bottom"><b>tcpChksum</b> (struct packet *pkt, ushort len, struct netaddr *src, struct netaddr *dst)</td></tr>
<tr class="separator:ga25d584036e586a90cc128af3db5d74f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf2201252cc913e86fe5a373d7de34ce1"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gaf2201252cc913e86fe5a373d7de34ce1">tcpClose</a> (device *devptr)</td></tr>
<tr class="separator:gaf2201252cc913e86fe5a373d7de34ce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaec53b1eedec31d820839a58848186ba8"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gaec53b1eedec31d820839a58848186ba8">tcpControl</a> (device *devptr, int func, long arg1, long arg2)</td></tr>
<tr class="separator:gaec53b1eedec31d820839a58848186ba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa4058dc134ea0d6fe0e7317506d950f1"><td class="memItemLeft" align="right" valign="top">struct tcb *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gaa4058dc134ea0d6fe0e7317506d950f1">tcpDemux</a> (ushort dstpt, ushort srcpt, struct netaddr *dstip, struct netaddr *srcip)</td></tr>
<tr class="separator:gaa4058dc134ea0d6fe0e7317506d950f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga198efe4277244205130d48ee968f1637"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga198efe4277244205130d48ee968f1637">tcpFree</a> (struct tcb *tcbptr)</td></tr>
<tr class="separator:ga198efe4277244205130d48ee968f1637"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga303c6d47bcc758c70437f3ff5c87eac8"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga303c6d47bcc758c70437f3ff5c87eac8">tcpGetc</a> (device *devptr)</td></tr>
<tr class="separator:ga303c6d47bcc758c70437f3ff5c87eac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae7df99509f17d9b30690259c54609971"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gae7df99509f17d9b30690259c54609971">tcpInit</a> (device *devptr)</td></tr>
<tr class="separator:gae7df99509f17d9b30690259c54609971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga230f078f96a8801c3ad397608bcf0024"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga230f078f96a8801c3ad397608bcf0024">tcpOpen</a> (device *devptr, va_list ap)</td></tr>
<tr class="separator:ga230f078f96a8801c3ad397608bcf0024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72ec23c6f1f48df8cb9d1be254f78633"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga72ec23c6f1f48df8cb9d1be254f78633">tcpOpenActive</a> (struct tcb *tcbptr)</td></tr>
<tr class="separator:ga72ec23c6f1f48df8cb9d1be254f78633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga806281518a04d24bb69d002f646de124"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga806281518a04d24bb69d002f646de124">tcpPutc</a> (device *devptr, char ch)</td></tr>
<tr class="separator:ga806281518a04d24bb69d002f646de124"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05afe88a1739bc885bb7c36e78b1abb8"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga05afe88a1739bc885bb7c36e78b1abb8">tcpRead</a> (device *devptr, void *buf, uint len)</td></tr>
<tr class="separator:ga05afe88a1739bc885bb7c36e78b1abb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfb5a1029610c46c6b613083c5c64b4b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gacfb5a1029610c46c6b613083c5c64b4b">tcpRecv</a> (struct packet *pkt, struct netaddr *src, struct netaddr *dst)</td></tr>
<tr class="separator:gacfb5a1029610c46c6b613083c5c64b4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5d9dee72be6259d34f7485488fa1ec2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gac5d9dee72be6259d34f7485488fa1ec2">tcpRecvAck</a> (struct packet *pkt, struct tcb *tcbptr)</td></tr>
<tr class="separator:gac5d9dee72be6259d34f7485488fa1ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30aa46165497d851dc343bc9e2213b49"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga30aa46165497d851dc343bc9e2213b49">tcpRecvData</a> (struct packet *pkt, struct tcb *tcbptr)</td></tr>
<tr class="separator:ga30aa46165497d851dc343bc9e2213b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd802c3df4d82e41b0e5a1546298fad1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gadd802c3df4d82e41b0e5a1546298fad1">tcpRecvListen</a> (struct packet *pkt, struct tcb *tcbptr, struct netaddr *src)</td></tr>
<tr class="separator:gadd802c3df4d82e41b0e5a1546298fad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf75dfc1963cc2d89642783340c207a6e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gaf75dfc1963cc2d89642783340c207a6e">tcpRecvOpts</a> (struct packet *pkt, struct tcb *tcbptr)</td></tr>
<tr class="separator:gaf75dfc1963cc2d89642783340c207a6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1710673f803d8de161b1f3361c4bdfe3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga1710673f803d8de161b1f3361c4bdfe3">tcpRecvOther</a> (struct packet *pkt, struct tcb *tcbptr)</td></tr>
<tr class="separator:ga1710673f803d8de161b1f3361c4bdfe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga677c08cb2df41f2401c5d290a9c75aed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga677c08cb2df41f2401c5d290a9c75aed">tcpRecvRtt</a> (struct tcb *tcbptr)</td></tr>
<tr class="separator:ga677c08cb2df41f2401c5d290a9c75aed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0ae4a69a0245140ecc469e4da3e0b3e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gad0ae4a69a0245140ecc469e4da3e0b3e">tcpRecvSynsent</a> (struct packet *pkt, struct tcb *tcbptr)</td></tr>
<tr class="separator:gad0ae4a69a0245140ecc469e4da3e0b3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a97dea541478f672cf14d3605b4d61a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga7a97dea541478f672cf14d3605b4d61a">tcpRecvValid</a> (struct packet *pkt, struct tcb *tcbptr)</td></tr>
<tr class="separator:ga7a97dea541478f672cf14d3605b4d61a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9043f3398e6fc376b80bd6815089d429"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga9043f3398e6fc376b80bd6815089d429">tcpSend</a> (struct tcb *tcbptr, uchar ctrl, uint seqnum, uint acknum, uint datastart, ushort datalen)</td></tr>
<tr class="separator:ga9043f3398e6fc376b80bd6815089d429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96aabab6af46b8ca509a343ace40560d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga96aabab6af46b8ca509a343ace40560d">tcpSendAck</a> (struct tcb *tcbptr)</td></tr>
<tr class="separator:ga96aabab6af46b8ca509a343ace40560d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd1b604ee757b32ba9e8ba43c5b36016"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gafd1b604ee757b32ba9e8ba43c5b36016">tcpSendData</a> (struct tcb *tcbptr)</td></tr>
<tr class="separator:gafd1b604ee757b32ba9e8ba43c5b36016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaccbfb1de34110858fffedcfd8c25d173"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gaccbfb1de34110858fffedcfd8c25d173">tcpSendPersist</a> (struct tcb *tcbptr)</td></tr>
<tr class="separator:gaccbfb1de34110858fffedcfd8c25d173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaba6d7a6b0712369c16b4638856448a0d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gaba6d7a6b0712369c16b4638856448a0d">tcpSendRst</a> (struct packet *pkt, struct netaddr *src, struct netaddr *dst)</td></tr>
<tr class="separator:gaba6d7a6b0712369c16b4638856448a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6624cffbf72611b38c851038c69c081a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga6624cffbf72611b38c851038c69c081a">tcpSendRxt</a> (struct tcb *tcbptr)</td></tr>
<tr class="separator:ga6624cffbf72611b38c851038c69c081a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11d70dce9f7e24b008e67c1441280516"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga11d70dce9f7e24b008e67c1441280516">tcpSendSyn</a> (struct tcb *tcbptr)</td></tr>
<tr class="separator:ga11d70dce9f7e24b008e67c1441280516"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c6b058b062936d898e8271d17c9be3b"><td class="memItemLeft" align="right" valign="top">ushort&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga9c6b058b062936d898e8271d17c9be3b">tcpSendWindow</a> (struct tcb *tcbptr)</td></tr>
<tr class="separator:ga9c6b058b062936d898e8271d17c9be3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga68b91348e1b9aee77e4864bf8cff4865"><td class="memItemLeft" align="right" valign="top">tcpseq&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga68b91348e1b9aee77e4864bf8cff4865">tcpSeqdiff</a> (tcpseq first, tcpseq second)</td></tr>
<tr class="separator:ga68b91348e1b9aee77e4864bf8cff4865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2eb00046ecdf585e473444ac8f43c4ff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga2eb00046ecdf585e473444ac8f43c4ff">tcpSetup</a> (struct tcb *tcbptr)</td></tr>
<tr class="separator:ga2eb00046ecdf585e473444ac8f43c4ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98980048cd0cb43f86026683f5dca029"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga98980048cd0cb43f86026683f5dca029">tcpStat</a> (struct tcb *tcbptr)</td></tr>
<tr class="separator:ga98980048cd0cb43f86026683f5dca029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85c103c53fb875865effc96125c85b0f"><td class="memItemLeft" align="right" valign="top">thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga85c103c53fb875865effc96125c85b0f">tcpTimer</a> (void)</td></tr>
<tr class="separator:ga85c103c53fb875865effc96125c85b0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6fee4e9c9633a74534e7a68cfa5e30fa"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga6fee4e9c9633a74534e7a68cfa5e30fa">tcpTimerPurge</a> (struct tcb *tcbptr, uchar type)</td></tr>
<tr class="separator:ga6fee4e9c9633a74534e7a68cfa5e30fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85db0509e89ad372e57a2e03cb87b95c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga85db0509e89ad372e57a2e03cb87b95c">tcpTimerRemain</a> (struct tcb *tcbptr, uchar type)</td></tr>
<tr class="separator:ga85db0509e89ad372e57a2e03cb87b95c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga201c9b5969b80c388867c898b99a985b"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga201c9b5969b80c388867c898b99a985b">tcpTimerSched</a> (int time, struct tcb *tcbptr, uchar type)</td></tr>
<tr class="separator:ga201c9b5969b80c388867c898b99a985b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2e1f210796b029602528dd31c4b63a71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#ga2e1f210796b029602528dd31c4b63a71">tcpTimerTrigger</a> (uchar type, struct tcb *tcbptr)</td></tr>
<tr class="separator:ga2e1f210796b029602528dd31c4b63a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaadacb875ab044ec9478a2e50c07e0e47"><td class="memItemLeft" align="right" valign="top">devcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tcp.html#gaadacb875ab044ec9478a2e50c07e0e47">tcpWrite</a> (device *devptr, void *buf, uint len)</td></tr>
<tr class="separator:gaadacb875ab044ec9478a2e50c07e0e47"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Transmission Control Protocol driver. </p>
<p>This module provides an interface to the Transmission Control Protocol (TCP). </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaa2153df9bbc47bfd108b8220ff1d8ab2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ushort tcpAlloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate an available tcp device. </p>
<dl class="section return"><dt>Returns</dt><dd>device number for a tcp device, SYSERR if none are free </dd></dl>

</div>
</div>
<a class="anchor" id="gaf2201252cc913e86fe5a373d7de34ce1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpClose </td>
          <td>(</td>
          <td class="paramtype">device *&#160;</td>
          <td class="paramname"><em>devptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close a TCP device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">devptr</td><td>TCP device table entry </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK if TCP is closed properly, otherwise SYSERR </dd></dl>

</div>
</div>
<a class="anchor" id="gaec53b1eedec31d820839a58848186ba8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpControl </td>
          <td>(</td>
          <td class="paramtype">device *&#160;</td>
          <td class="paramname"><em>devptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>arg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>arg2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Control function for TCP devices. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">devptr</td><td>ethernet device table entry </td></tr>
    <tr><td class="paramname">func</td><td>control function to execute </td></tr>
    <tr><td class="paramname">arg1</td><td>first argument for the control function </td></tr>
    <tr><td class="paramname">arg2</td><td>second argument for the control function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the result of the control function </dd></dl>

</div>
</div>
<a class="anchor" id="gaa4058dc134ea0d6fe0e7317506d950f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct tcb* tcpDemux </td>
          <td>(</td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>dstpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>srcpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct netaddr *&#160;</td>
          <td class="paramname"><em>dstip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct netaddr *&#160;</td>
          <td class="paramname"><em>srcip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Locate the TCP socket for a TCP packet </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dstpt</td><td>destination port of the TCP packet </td></tr>
    <tr><td class="paramname">srcpt</td><td>source port of the TCP packet </td></tr>
    <tr><td class="paramname">dstip</td><td>destination IP of the TCP packet </td></tr>
    <tr><td class="paramname">srcip</td><td>source IP of the TCP packet </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>most completely matched socket, NULL if no match </dd></dl>

</div>
</div>
<a class="anchor" id="ga198efe4277244205130d48ee968f1637"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpFree </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete a TCB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcbptr</td><td>pointer to transmission control block for connection  TCB mutex is already held </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga303c6d47bcc758c70437f3ff5c87eac8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpGetc </td>
          <td>(</td>
          <td class="paramtype">device *&#160;</td>
          <td class="paramname"><em>devptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read into a single octet from TCP. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">devptr</td><td>TCP device table entry </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>character read from TCP </dd></dl>

</div>
</div>
<a class="anchor" id="gae7df99509f17d9b30690259c54609971"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpInit </td>
          <td>(</td>
          <td class="paramtype">device *&#160;</td>
          <td class="paramname"><em>devptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize TCP structures. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">devptr</td><td>tcp device table entry </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK if device is initialized </dd></dl>

</div>
</div>
<a class="anchor" id="ga230f078f96a8801c3ad397608bcf0024"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpOpen </td>
          <td>(</td>
          <td class="paramtype">device *&#160;</td>
          <td class="paramname"><em>devptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Associate a tcp with a network device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">devptr</td><td>tcp device table entry </td></tr>
    <tr><td class="paramname">ap</td><td>2nd argument is the local IP address 3rd argument is the remote IP address 4th argument is the local port (auto-assigned if zero) 5th argument is the remote port (ignored if zero) 6th argument is the mode (TCP_ACTIVE or TCP_PASSIVE) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK if TCP is opened properly, otherwise SYSERR </dd></dl>

</div>
</div>
<a class="anchor" id="ga72ec23c6f1f48df8cb9d1be254f78633"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpOpenActive </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Actively opens a TCP connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcbptr</td><td>TCB for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK if tcp is opened properly, otherwise SYSERR </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>-condition TCB mutex is still held </dd></dl>

</div>
</div>
<a class="anchor" id="ga806281518a04d24bb69d002f646de124"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpPutc </td>
          <td>(</td>
          <td class="paramtype">device *&#160;</td>
          <td class="paramname"><em>devptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>ch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a single octet to send via TCP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">devptr</td><td>TCP device table entry</td></tr>
    <tr><td class="paramname">ch</td><td>character to output</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>ch</code> as an <code>unsigned char</code> cast to an <code>int</code> on success; <code>SYSERR</code> on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="ga05afe88a1739bc885bb7c36e78b1abb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpRead </td>
          <td>(</td>
          <td class="paramtype">device *&#160;</td>
          <td class="paramname"><em>devptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read into a buffer from TCP. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">devptr</td><td>TCP device table entry </td></tr>
    <tr><td class="paramname">buf</td><td>buffer to read octets into </td></tr>
    <tr><td class="paramname">len</td><td>size of the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>count of octets read </dd></dl>

</div>
</div>
<a class="anchor" id="gacfb5a1029610c46c6b613083c5c64b4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpRecv </td>
          <td>(</td>
          <td class="paramtype">struct packet *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct netaddr *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct netaddr *&#160;</td>
          <td class="paramname"><em>dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Processes an incoming TCP packet. See RFC 793, pg 65 for an overview of the TCP packet arrival algorithm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>incoming packet </td></tr>
    <tr><td class="paramname">src</td><td>source of incoming packet </td></tr>
    <tr><td class="paramname">dst</td><td>destination of incoming packet </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gac5d9dee72be6259d34f7485488fa1ec2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpRecvAck </td>
          <td>(</td>
          <td class="paramtype">struct packet *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process an ackowledgement of data in an incoming TCP segment for a connection which has been fully established. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>incoming packet </td></tr>
    <tr><td class="paramname">tcbptr</td><td>pointer to transmission control block for connection  TCB mutex is already held  TCB mutex is still held </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga30aa46165497d851dc343bc9e2213b49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpRecvData </td>
          <td>(</td>
          <td class="paramtype">struct packet *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Processes the data in an incoming packet for a TCP connection. Function based on RFC 763, pg 73-76. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>incoming packet </td></tr>
    <tr><td class="paramname">tcbptr</td><td>pointer to transmission control block for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>-condition TCB mutex is still held </dd></dl>

</div>
</div>
<a class="anchor" id="gadd802c3df4d82e41b0e5a1546298fad1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpRecvListen </td>
          <td>(</td>
          <td class="paramtype">struct packet *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct netaddr *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Processes an incoming packet for a TCP connection in the LISTEN state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>incoming packet </td></tr>
    <tr><td class="paramname">tcbptr</td><td>pointer to transmission control block for connection </td></tr>
    <tr><td class="paramname">src</td><td>source IP address </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>

</div>
</div>
<a class="anchor" id="gaf75dfc1963cc2d89642783340c207a6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpRecvOpts </td>
          <td>(</td>
          <td class="paramtype">struct packet *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Processes the options in an incoming packet for a TCP connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>incoming packet </td></tr>
    <tr><td class="paramname">tcbptr</td><td>pointer to transmission control block for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>-condition TCB mutex is still held </dd></dl>

</div>
</div>
<a class="anchor" id="ga1710673f803d8de161b1f3361c4bdfe3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpRecvOther </td>
          <td>(</td>
          <td class="paramtype">struct packet *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Processes an incoming packet for a TCP connection in the SYNRECV, ESTAB, FINWT1, FINWT2, CLOSEWT, CLOSING, LASTACK, or TIMEWT state. Function based on RFC 763, pg 69-73. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>incoming packet </td></tr>
    <tr><td class="paramname">tcbptr</td><td>pointer to transmission control block for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>-condition TCB mutex is still held </dd></dl>

</div>
</div>
<a class="anchor" id="ga677c08cb2df41f2401c5d290a9c75aed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpRecvRtt </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handle round trip time estimates based on an incoming acknowledgement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcbptr</td><td>pointer to transmission control block for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK  TCB mutex is already held  TCB mutex is still held </dd></dl>

</div>
</div>
<a class="anchor" id="gad0ae4a69a0245140ecc469e4da3e0b3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpRecvSynsent </td>
          <td>(</td>
          <td class="paramtype">struct packet *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Processes an incoming packet for a TCP connection in the SYNSENT state. Function based on RFC 763, pg 66-68. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>incoming packet </td></tr>
    <tr><td class="paramname">tcbptr</td><td>pointer to transmission control block for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK or TCP_ERR_SNDRST </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>

</div>
</div>
<a class="anchor" id="ga7a97dea541478f672cf14d3605b4d61a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tcpRecvValid </td>
          <td>(</td>
          <td class="paramtype">struct packet *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks if an incoming TCP segment is valid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>incoming packet </td></tr>
    <tr><td class="paramname">tcbptr</td><td>pointer to transmission control block for connection  TCB mutex is already held  TCB mutex is still held </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9043f3398e6fc376b80bd6815089d429"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpSend </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar&#160;</td>
          <td class="paramname"><em>ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>seqnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>acknum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>datastart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends a TCP packet for a TCP connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcbptr</td><td>pointer to the transmission control block for connection </td></tr>
    <tr><td class="paramname">ctrl</td><td>control flags to be set </td></tr>
    <tr><td class="paramname">seqnum</td><td>sequence number for the packet </td></tr>
    <tr><td class="paramname">acknum</td><td>acknowledgement number for the packet </td></tr>
    <tr><td class="paramname">data</td><td>data to be included in the packet, NULL if no data </td></tr>
    <tr><td class="paramname">datalen</td><td>length of the data, 0 if no data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>-condition TCB mutex is still held </dd></dl>

</div>
</div>
<a class="anchor" id="ga96aabab6af46b8ca509a343ace40560d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpSendAck </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends an ACK packet to ackowledge all received data for a TCP connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcpptr</td><td>pointer to the transmission control block for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>-condition TCB mutex is still held </dd></dl>

</div>
</div>
<a class="anchor" id="gafd1b604ee757b32ba9e8ba43c5b36016"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpSendData </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends pending outbound data (including SYN and FIN) for a TCP connection, if new data is ready for transmission. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcpptr</td><td>pointer to the transmission control block for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of octets sent </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>-condition TCB mutex is still held </dd></dl>
<p>&lt; amount of window filled with data pending ACK</p>
<p>&lt; amount of data pending ACK or transmission </p>

</div>
</div>
<a class="anchor" id="gaccbfb1de34110858fffedcfd8c25d173"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpSendPersist </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send a segment to probe a receiver who advertised a window size of 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcpptr</td><td>pointer to the transmission control block for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of octets sent </dd></dl>

</div>
</div>
<a class="anchor" id="gaba6d7a6b0712369c16b4638856448a0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpSendRst </td>
          <td>(</td>
          <td class="paramtype">struct packet *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct netaddr *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct netaddr *&#160;</td>
          <td class="paramname"><em>dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends a reset in response to an incorrect TCP packet </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>incoming packet which requires a reset response </td></tr>
    <tr><td class="paramname">src</td><td>source IP address of the packet </td></tr>
    <tr><td class="paramname">dst</td><td>destination IP address of the packet </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga6624cffbf72611b38c851038c69c081a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpSendRxt </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retransmitts a segment of pending outbound data (including SYN and FIN) for a TCP connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcpptr</td><td>pointer to the transmission control block for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of octets sent </dd></dl>
<p>&lt; amount of data pending ACK </p>

</div>
</div>
<a class="anchor" id="ga11d70dce9f7e24b008e67c1441280516"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpSendSyn </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends an SYN packet to establish a TCP connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcpptr</td><td>pointer to the transmission control block for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>-condition TCB mutex is still held </dd></dl>

</div>
</div>
<a class="anchor" id="ga9c6b058b062936d898e8271d17c9be3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ushort tcpSendWindow </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculates the window size to advertise in an outgoing TCP packet. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcbptr</td><td>pointer to transmission control block for connection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>-condition TCB mutex is still held </dd></dl>

</div>
</div>
<a class="anchor" id="ga68b91348e1b9aee77e4864bf8cff4865"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tcpseq tcpSeqdiff </td>
          <td>(</td>
          <td class="paramtype">tcpseq&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tcpseq&#160;</td>
          <td class="paramname"><em>second</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculates the difference between two sequence numbers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">first</td><td>sequence number that occurs first </td></tr>
    <tr><td class="paramname">second</td><td>sequence number that occurs second </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>difference between two sequence numbers </dd></dl>

</div>
</div>
<a class="anchor" id="ga2eb00046ecdf585e473444ac8f43c4ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpSetup </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Intializes a transmission control block.  tcbptr TCB for connection </p>
<dl class="section return"><dt>Returns</dt><dd>OK if TCB is initialized properly, otherwise SYSERR </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>-condition TCB mutex is already held </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>-condition TCB mutex is still held </dd></dl>

</div>
</div>
<a class="anchor" id="ga98980048cd0cb43f86026683f5dca029"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcpStat </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transmission Control Protocol status command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcbptr</td><td>pointer to transmission control block </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga85c103c53fb875865effc96125c85b0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">thread tcpTimer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TCP timer process to manage timeout and retransmit events. </p>

</div>
</div>
<a class="anchor" id="ga6fee4e9c9633a74534e7a68cfa5e30fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpTimerPurge </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove all TCP timer events for a particular TCB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcbptr</td><td>TCB for which to remove all events </td></tr>
    <tr><td class="paramname">type</td><td>type of events to remove, all types are removed if NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the time elapsed for the first remvoed event, SYSERR if no events were removed </dd></dl>

</div>
</div>
<a class="anchor" id="ga85db0509e89ad372e57a2e03cb87b95c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcpTimerRemain </td>
          <td>(</td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine time reamining for a TCP timer event for a particular TCB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcbptr</td><td>TCB to which event corresponds </td></tr>
    <tr><td class="paramname">type</td><td>type of timer event </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>time remaining for event, 0 if no event exists </dd></dl>

</div>
</div>
<a class="anchor" id="ga201c9b5969b80c388867c898b99a985b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpTimerSched </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Schedule TCP timer events. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>milliseconds before timer triggers </td></tr>
    <tr><td class="paramname">tcbptr</td><td>TCB with which event is associated </td></tr>
    <tr><td class="paramname">type</td><td>type of timer event </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OK if event is successfully scheduled, otherwise SYSERR </dd></dl>

</div>
</div>
<a class="anchor" id="ga2e1f210796b029602528dd31c4b63a71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcpTimerTrigger </td>
          <td>(</td>
          <td class="paramtype">uchar&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct tcb *&#160;</td>
          <td class="paramname"><em>tcbptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Processes TCP timer events. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">evtptr</td><td>timer event to process </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaadacb875ab044ec9478a2e50c07e0e47"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">devcall tcpWrite </td>
          <td>(</td>
          <td class="paramtype">device *&#160;</td>
          <td class="paramname"><em>devptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write into a buffer to send via TCP. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">devptr</td><td>TCP device table entry </td></tr>
    <tr><td class="paramname">buf</td><td>buffer to read octets into </td></tr>
    <tr><td class="paramname">len</td><td>size of the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>count of octets written </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
